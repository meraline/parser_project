# üöÄ –°–ò–°–¢–ï–ú–ê –ö–ê–¢–ê–õ–û–ñ–ù–û–ì–û –ü–ê–†–°–ò–ù–ì–ê DROM.RU

## üìã –û–±–∑–æ—Ä

–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **üîç Brand Catalog Extractor** - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –±—Ä–µ–Ω–¥–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
2. **üöó Catalog Parser** - –ø–∞—Ä—Å–∏—Ç –æ—Ç–∑—ã–≤—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–∞–ª–æ–≥–∞

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
üìÅ scripts/parsing/
‚îú‚îÄ‚îÄ üîç brand_catalog_extractor.py  # –≠–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤
‚îú‚îÄ‚îÄ üöó catalog_parser.py           # –ü–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ç–∞–ª–æ–≥–∞  
‚îú‚îÄ‚îÄ üìã normalized_parser.py        # –ë–∞–∑–æ–≤—ã–π –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
‚îî‚îÄ‚îÄ üìä CATALOG_PARSER_README.md    # –≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

üìÅ data/
‚îî‚îÄ‚îÄ üìÑ brand_catalog.json          # –ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –±—Ä–µ–Ω–¥–æ–≤

üìÅ logs/
‚îú‚îÄ‚îÄ üìù brand_extractor.log         # –õ–æ–≥–∏ —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞
‚îî‚îÄ‚îÄ üìù catalog_parser.log          # –õ–æ–≥–∏ –∫–∞—Ç–∞–ª–æ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
```

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã
```bash
source parser_env/bin/activate
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤
```bash
# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤ (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω —Ä–∞–∑)
python scripts/parsing/brand_catalog_extractor.py --extract

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è –≤—Å–µ—Ö –±—Ä–µ–Ω–¥–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ø–æ–ª–Ω–æ—Ç—ã)
python scripts/parsing/brand_catalog_extractor.py --extract --models --max-brands 10
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
python scripts/parsing/brand_catalog_extractor.py --stats
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞

### üéØ –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞
```bash
# –ü–∞—Ä—Å–∏—Ç—å Toyota (3 –º–æ–¥–µ–ª–∏, 5 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –º–æ–¥–µ–ª—å)
python scripts/parsing/catalog_parser.py --brand toyota --max-models 3 --max-reviews 5

# –ü–∞—Ä—Å–∏—Ç—å Mazda (–≤—Å–µ –º–æ–¥–µ–ª–∏, 10 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –º–æ–¥–µ–ª—å)  
python scripts/parsing/catalog_parser.py --brand mazda --max-reviews 10

# –ü–∞—Ä—Å–∏—Ç—å BMW (5 –º–æ–¥–µ–ª–µ–π, 20 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –º–æ–¥–µ–ª—å)
python scripts/parsing/catalog_parser.py --brand bmw --max-models 5 --max-reviews 20
```

### üåü –ü–∞—Ä—Å–∏–Ω–≥ –≤—Å–µ—Ö –±—Ä–µ–Ω–¥–æ–≤ (–±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º)
```bash
# –ü–∞—Ä—Å–∏—Ç—å —Ç–æ–ø-5 –±—Ä–µ–Ω–¥–æ–≤ (2 –º–æ–¥–µ–ª–∏, 10 –æ—Ç–∑—ã–≤–æ–≤ –Ω–∞ –º–æ–¥–µ–ª—å)
python scripts/parsing/catalog_parser.py --all-brands --max-brands 5 --max-models 2 --max-reviews 10

# –ü–æ–ª–Ω—ã–π –±–æ–µ–≤–æ–π —Ä–µ–∂–∏–º (—Ç–æ–ø-20 –±—Ä–µ–Ω–¥–æ–≤, 10 –º–æ–¥–µ–ª–µ–π, 50 –æ—Ç–∑—ã–≤–æ–≤)
python scripts/parsing/catalog_parser.py --all-brands --max-brands 20 --max-models 10 --max-reviews 50

# –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (—Ç–æ–ø-3 –±—Ä–µ–Ω–¥–∞, 1 –º–æ–¥–µ–ª—å, 3 –æ—Ç–∑—ã–≤–∞)
python scripts/parsing/catalog_parser.py --all-brands --max-brands 3 --max-models 1 --max-reviews 3
```

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ë–î
python scripts/parsing/catalog_parser.py --stats
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –±—Ä–µ–Ω–¥–æ–≤
python scripts/parsing/brand_catalog_extractor.py --update
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è –Ω–æ–≤—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
```bash
# –ò–∑–≤–ª–µ—á—å –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
python scripts/parsing/brand_catalog_extractor.py --extract --models --max-brands 5
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

### –ü—Ä–∏–º–µ—Ä brand_catalog.json:
```json
{
  "extraction_date": "2025-01-25T10:30:00",
  "total_brands": 150,
  "brands": {
    "toyota": {
      "name": "Toyota",
      "slug": "toyota",
      "url": "https://www.drom.ru/reviews/toyota/",
      "review_count": 282196,
      "models": ["4runner", "allion", "avensis", "camry", "corolla"]
    },
    "bmw": {
      "name": "BMW", 
      "slug": "bmw",
      "url": "https://www.drom.ru/reviews/bmw/",
      "review_count": 18001,
      "models": ["x5", "x3", "3-series", "5-series", "7-series"]
    }
  }
}
```

## üéØ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞:
- –ë—Ä–µ–Ω–¥—ã —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–∑—ã–≤–æ–≤ (–æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É)
- –ú–æ–¥–µ–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –∞–ª—Ñ–∞–≤–∏—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
- –û—Ç–∑—ã–≤—ã –ø–∞—Ä—Å—è—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–Ω–µ —Ä–∞–Ω–¥–æ–º–Ω–æ)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤:
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª–Ω—ã–µ –æ—Ç–∑—ã–≤—ã
- üîÑ –ü–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–µ–ø–æ–ª–Ω—ã–µ –æ—Ç–∑—ã–≤—ã (< 100 —Å–∏–º–≤–æ–ª–æ–≤)
- üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ—à–∏–±–∫–∞–º

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –§–∞–π–ª—ã –ª–æ–≥–æ–≤:
- `logs/brand_extractor.log` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞
- `logs/catalog_parser.log` - –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤:
```
2025-01-25 10:30:15 - INFO - üöó –ù–∞—á–∏–Ω–∞–µ–º –ø–∞—Ä—Å–∏–Ω–≥ –±—Ä–µ–Ω–¥–∞ Toyota (toyota)
2025-01-25 10:30:15 - INFO - üìã –ú–æ–¥–µ–ª–µ–π –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ: 20
2025-01-25 10:30:16 - INFO - [1/20] –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–æ–¥–µ–ª—å: 4runner
2025-01-25 10:30:18 - INFO - –ù–∞–π–¥–µ–Ω–æ 15 –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è toyota/4runner
2025-01-25 10:30:20 - INFO - ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ Toyota –∑–∞–≤–µ—Ä—à–µ–Ω: 5 –Ω–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
```

## üéÆ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –æ–¥–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞
python scripts/parsing/catalog_parser.py --brand toyota --max-models 1 --max-reviews 2

# –¢–µ—Å—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±—Ä–µ–Ω–¥–æ–≤
python scripts/parsing/catalog_parser.py --all-brands --max-brands 2 --max-models 1 --max-reviews 3
```

### üî• –ë–æ–µ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```bash
# –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python scripts/parsing/catalog_parser.py --all-brands --max-brands 10 --max-models 5 --max-reviews 20

# –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–º–æ—â–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)
python scripts/parsing/catalog_parser.py --all-brands --max-brands 50 --max-models 10 --max-reviews 100

# –ü–æ–ª–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (–æ—á–µ–Ω—å –¥–æ–ª–≥–æ!)
python scripts/parsing/catalog_parser.py --all-brands --max-reviews 1000
```

### üéØ –¶–µ–ª–µ–≤–æ–π –ø–∞—Ä—Å–∏–Ω–≥:
```bash
# –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –±—Ä–µ–Ω–¥—ã
python scripts/parsing/catalog_parser.py --brand toyota --max-reviews 100
python scripts/parsing/catalog_parser.py --brand bmw --max-reviews 50
python scripts/parsing/catalog_parser.py --brand mercedes-benz --max-reviews 50

# –ö–∏—Ç–∞–π—Å–∫–∏–µ –±—Ä–µ–Ω–¥—ã
python scripts/parsing/catalog_parser.py --brand chery --max-reviews 30
python scripts/parsing/catalog_parser.py --brand geely --max-reviews 30
python scripts/parsing/catalog_parser.py --brand byd --max-reviews 30
```

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∞:
- **1 –æ—Ç–∑—ã–≤**: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- **1 –º–æ–¥–µ–ª—å** (10 –æ—Ç–∑—ã–≤–æ–≤): ~30 —Å–µ–∫—É–Ω–¥  
- **1 –±—Ä–µ–Ω–¥** (5 –º–æ–¥–µ–ª–µ–π): ~3-5 –º–∏–Ω—É—Ç
- **10 –±—Ä–µ–Ω–¥–æ–≤**: ~30-60 –º–∏–Ω—É—Ç

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑—É–º–Ω—ã–µ –ª–∏–º–∏—Ç—ã (max-models, max-reviews)
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
- –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥ —á–∞—Å—Ç—è–º–∏ –≤ —Å–ª—É—á–∞–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤

## üîß –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –±—Ä–µ–Ω–¥–æ–≤
python scripts/parsing/brand_catalog_extractor.py --update

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
python scripts/parsing/brand_catalog_extractor.py --stats
```

### –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤:
```bash
# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤
mv logs/catalog_parser.log logs/catalog_parser_$(date +%Y%m%d).log
mv logs/brand_extractor.log logs/brand_extractor_$(date +%Y%m%d).log
```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –∫–∞—Ç–∞–ª–æ–∂–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É** (–Ω–µ —Å–ª—É—á–∞–π–Ω—É—é)  
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫—É –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—å –Ω–µ–ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –æ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ production  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏  

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è production-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! üöÄ**
