# ๐ ะะะะะะฏ ะะะฅะะขะะะขะฃะะ ะะะะกะะะ DROM.RU

## ๐ฏ ะะะะะะะฏ ะฆะะะฌ
**ะะะะฌะจะ ะะ ะกะะะะะะ ะะะะซะฅ ะะะะกะะะะ!**  
ะะฐะทะฒะธะฒะฐะตะผ ัะพะปัะบะพ `UnifiedDromParser` - ะตะดะธะฝัะน ะผะฐััะตั-ะฟะฐััะตั.

## ๐ ะกะขะะฃะะขะฃะะ ะะะะกะะะะ

### โ ะะกะะะะะซะ ะะะะกะะะซ (ะะกะะะะฌะะฃะะ)
```
src/auto_reviews_parser/parsers/
โโโ unified_master_parser.py  โ ๐ ะะะะะะซะ ะะะะกะะ - ะะะะะะะะะ ะขะะะฌะะ ะะะ!
โโโ base.py                   โ ะะฐะทะพะฒัะต ะบะปะฐััั ะธ ััะธะปะธัั
โโโ drom_reviews.py          โ ะกัะฐััะน ะฟะฐััะตั (ะพััะฐะฒะปัะตะผ ะดะปั ัะพะฒะผะตััะธะผะพััะธ)
โโโ __init__.py              โ ะญะบัะฟะพััั
```

### โ ะฃะกะขะะะะะจะะ ะะะะกะะะซ (ะะ ะะกะะะะฌะะฃะะ)
```
scripts/parsing/ - ะะกะ ะคะะะะซ ะ ะญะขะะ ะะะะะ ะฃะกะขะะะะะ!
โโโ brand_based_parser.py     โ ะะฐะผะตะฝะตะฝ unified_master_parser.py
โโโ catalog_parser.py         โ ะะฝัะตะณัะธัะพะฒะฐะฝ ะฒ unified_master_parser.py  
โโโ normalized_parser.py      โ ะะฐะผะตะฝะตะฝ unified_master_parser.py
โโโ real_brand_parser.py      โ ะะฐะผะตะฝะตะฝ unified_master_parser.py
โโโ ... (ะฒัะต ะพััะฐะปัะฝัะต)       โ ะะ ะะกะะะะฌะะฃะะ!
```

## ๐๏ธ ะะะฅะะขะะะขะฃะะ ะะะะะะะ ะะะะกะะะ

### ๐ ะกัััะบัััั ะดะฐะฝะฝัั
```python
@dataclass 
class ReviewData:
    """ะะดะธะฝะฐั ััััะบัััะฐ ะดะปั ะฒัะตั ัะธะฟะพะฒ ะพัะทัะฒะพะฒ"""
    review_id: str
    brand: str
    model: str  
    review_type: str  # 'long' ะธะปะธ 'short'
    year: Optional[int]
    engine_volume: Optional[float]
    fuel_type: Optional[str]
    transmission: Optional[str]
    drive_type: Optional[str]
    author: Optional[str]
    city: Optional[str]
    date: Optional[str]
    rating: Optional[int]
    title: Optional[str]
    positive: Optional[str]
    negative: Optional[str]
    general: Optional[str]
    breakages: Optional[str]
    photos: List[str]
    url: Optional[str]

@dataclass
class ModelInfo:
    """ะะฝัะพัะผะฐัะธั ะพ ะผะพะดะตะปะธ"""
    brand: str
    model: str
    model_url: str
    long_reviews_count: int = 0
    short_reviews_count: int = 0
```

### ๐ง ะัะฝะพะฒะฝัะต ะผะตัะพะดั

#### ๐ญ ะะฐัะฐะปะพะณะธะทะฐัะธั
- `get_brand_catalog()` - ะะพะปััะตะฝะธะต ัะฟะธัะบะฐ ะฒัะตั ะฑัะตะฝะดะพะฒ
- `get_brand_models(brand_slug)` - ะะพะปััะตะฝะธะต ะผะพะดะตะปะตะน ะฑัะตะฝะดะฐ

#### ๐ ะะฐััะธะฝะณ ะพัะทัะฒะพะฒ
- `parse_long_reviews(brand, model, limit)` - ะะปะธะฝะฝัะต ะพัะทัะฒั
- `parse_short_reviews(brand, model, limit)` - ะะพัะพัะบะธะต ะพัะทัะฒั  
- `parse_model_reviews(brand, model, long_limit, short_limit)` - ะัะต ะพัะทัะฒั ะผะพะดะตะปะธ

#### ๐ฏ ะะฐััะพะฒัะน ะฟะฐััะธะฝะณ
- `parse_multiple_models(models_limit, long_limit, short_limit)` - ะะฐััะธะฝะณ ะฝะตัะบะพะปัะบะธั ะผะพะดะตะปะตะน

#### ๐พ ะกะพััะฐะฝะตะฝะธะต
- `save_results(results, filename)` - ะกะพััะฐะฝะตะฝะธะต ะฒ JSON

### ๐๏ธ ะัััะพะตะฝะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

#### ๐ ะััะธัะพะฒะฐะฝะธะต
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะบััะธัะพะฒะฐะฝะธะต ะบะฐัะฐะปะพะณะพะฒ ะฑัะตะฝะดะพะฒ ะธ ะผะพะดะตะปะตะน
- ะคะฐะนะปั ะบััะฐ: `data/cache/brand_catalog.json`, `data/cache/models_{brand}.json`

#### ๐ ะะตััะธะบะธ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต
- ะะพะดัะพะฑะฝะฐั ััะฐัะธััะธะบะฐ ะทะฐะฟัะพัะพะฒ
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒ `logs/unified_parser.log`
- ะะตััะธะบะธ ััะฟะตัะฝะพััะธ ะฟะฐััะธะฝะณะฐ

#### ๐ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- ะะฒัะพะผะฐัะธัะตัะบะธะต ะฟะพะฒัะพัะฝัะต ะฟะพะฟััะบะธ
- ะะฑัะฐะฑะพัะบะฐ 404 ะพัะธะฑะพะบ
- Graceful degradation

#### โฑ๏ธ ะฃะฟัะฐะฒะปะตะฝะธะต ะฝะฐะณััะทะบะพะน
- ะะฐัััะฐะธะฒะฐะตะผัะต ะทะฐะดะตัะถะบะธ ะผะตะถะดั ะทะฐะฟัะพัะฐะผะธ
- ะะตะทะพะฟะฐัะฝัะต ะทะฐะณะพะปะพะฒะบะธ HTTP

## ๐ ะะกะะะะฌะะะะะะะ

### ะัะพััะพะน ะทะฐะฟััะบ
```bash
# ะะฐะฟััะบ ะตะดะธะฝะพะณะพ ะฟะฐััะตัะฐ
python run_unified_parser.py
```

### ะัะพะณัะฐะผะผะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต
```python
from auto_reviews_parser.parsers import UnifiedDromParser

# ะกะพะทะดะฐะตะผ ะฟะฐััะตั
parser = UnifiedDromParser(delay=1.0)

# ะะฐััะธะผ 3 ะผะพะดะตะปะธ: 3 ะดะปะธะฝะฝัั + 10 ะบะพัะพัะบะธั ะพัะทัะฒะพะฒ ะบะฐะถะดะฐั
results = parser.parse_multiple_models(
    models_limit=3,
    long_limit=3, 
    short_limit=10
)

# ะกะพััะฐะฝัะตะผ ัะตะทัะปััะฐัั
parser.save_results(results)
```

### ะะฐััะพะผะฝัะน ะฟะฐััะธะฝะณ
```python
# ะะฐััะธะฝะณ ะบะพะฝะบัะตัะฝะพะน ะผะพะดะตะปะธ
model_results = parser.parse_model_reviews(
    brand="toyota",
    model="camry", 
    long_limit=5,
    short_limit=20
)

# ะขะพะปัะบะพ ะบะพัะพัะบะธะต ะพัะทัะฒั
short_reviews = parser.parse_short_reviews("toyota", "camry", limit=50)

# ะขะพะปัะบะพ ะดะปะธะฝะฝัะต ะพัะทัะฒั  
long_reviews = parser.parse_long_reviews("toyota", "camry", limit=10)
```

## ๐ ะะะะะฆะะะซ ะะะะะะขะะฏ

### โ ะงะขะ ะะะะะะ
1. **ะะฐะทะฒะธะฒะฐะตะผ UnifiedDromParser** - ะดะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะต ััะฝะบัะธะธ ัะพะปัะบะพ ะฒ ะฝะตะณะพ
2. **ะฃะปัััะฐะตะผ ะธะทะฒะปะตัะตะฝะธะต ะดะฐะฝะฝัั** - ัะพะฒะตััะตะฝััะฒัะตะผ ะผะตัะพะดั extract_*
3. **ะะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะต ัะฐะนัั** - ะฝะฐัะปะตะดัะตะผ ะพั UnifiedDromParser
4. **ะะฟัะธะผะธะทะธััะตะผ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั** - ัะปัััะฐะตะผ ะบััะธัะพะฒะฐะฝะธะต ะธ ะฐะปะณะพัะธัะผั

### โ ะงะขะ ะะ ะะะะะะ  
1. **ะะ ัะพะทะดะฐะตะผ ะฝะพะฒัั ะฟะฐััะตัะพะฒ** ะฒ scripts/parsing/
2. **ะะ ะดัะฑะปะธััะตะผ ััะฝะบัะธะพะฝะฐะปัะฝะพััั** - ะธัะฟะพะปัะทัะตะผ ัััะตััะฒัััะธะน ะบะพะด
3. **ะะ ะบะพะฟะธััะตะผ ะบะพะด** ะผะตะถะดั ัะฐะนะปะฐะผะธ - ะฟะตัะตะธัะฟะพะปัะทัะตะผ ะผะตัะพะดั
4. **ะะ ะธะณะฝะพัะธััะตะผ ะฐััะธัะตะบัััั** - ัะปะตะดัะตะผ ะฟัะธะฝัะธะฟั ะตะดะธะฝะพะณะพ ะฟะฐััะตัะฐ

## ๐ง ะะะกะจะะะะะะ ะคะฃะะะฆะะะะะะฌะะะกะขะ

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ ัะฐะนัะฐ
```python
from auto_reviews_parser.parsers.unified_master_parser import UnifiedDromParser

class AutoRuParser(UnifiedDromParser):
    """ะะฐััะตั ะดะปั auto.ru ะฝะฐ ะพัะฝะพะฒะต ะตะดะธะฝะพะน ะฐััะธัะตะบัััั"""
    
    def __init__(self):
        super().__init__()
        self.base_url = "https://auto.ru"
    
    # ะะตัะตะพะฟัะตะดะตะปัะตะผ ัะพะปัะบะพ ัะฟะตัะธัะธัะฝัะต ะผะตัะพะดั
    def make_request(self, url: str) -> Optional[BeautifulSoup]:
        # ะกะฟะตัะธัะธัะฝะฐั ะปะพะณะธะบะฐ ะดะปั auto.ru
        pass
```

### ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพะณะพ ัะธะฟะฐ ะดะฐะฝะฝัั
```python
# ะ ReviewData ะดะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะต ะฟะพะปั
@dataclass 
class ReviewData:
    # ... ัััะตััะฒัััะธะต ะฟะพะปั ...
    price: Optional[int] = None          # ะฆะตะฝะฐ ะฐะฒัะพะผะพะฑะธะปั
    mileage: Optional[int] = None        # ะัะพะฑะตะณ
    ownership_period: Optional[str] = None  # ะะตัะธะพะด ะฒะปะฐะดะตะฝะธั
```

### ะฃะปัััะตะฝะธะต ะธะทะฒะปะตัะตะฝะธั ะดะฐะฝะฝัั
```python
def extract_price(self, text: str) -> Optional[int]:
    """ะะพะฒัะน ะผะตัะพะด ะธะทะฒะปะตัะตะฝะธั ัะตะฝั"""
    patterns = [
        r'(\d+(?:\s*\d{3})*)\s*(?:ััะฑ|โฝ)',
        r'(\d+)\s*ััััั', 
    ]
    # ... ะปะพะณะธะบะฐ ะธะทะฒะปะตัะตะฝะธั ...
```

## ๐ ะคะะะะะะะฏ ะกะขะะฃะะขะฃะะ

```
parser_project/
โโโ src/auto_reviews_parser/parsers/
โ   โโโ unified_master_parser.py  โ ๐ ะะะะะะซะ ะคะะะ
โ   โโโ base.py                   โ ะะฐะทะพะฒัะต ะบะปะฐััั
โ   โโโ drom_reviews.py          โ ะกะพะฒะผะตััะธะผะพััั
โ   โโโ __init__.py              โ ะญะบัะฟะพััั
โโโ run_unified_parser.py         โ ะกะบัะธะฟั ะทะฐะฟััะบะฐ
โโโ data/
โ   โโโ cache/                    โ ะัั ะบะฐัะฐะปะพะณะพะฒ
โ   โโโ *.json                    โ ะะตะทัะปััะฐัั ะฟะฐััะธะฝะณะฐ
โโโ logs/
    โโโ unified_parser.log        โ ะะพะณะธ ะฟะฐััะตัะฐ
```

## ๐ฏ ROADMAP

### ะะตััะธั 1.1 (ะขะตะบััะฐั)
- โ ะะดะธะฝัะน ะฟะฐััะตั ะดะปั ะดะปะธะฝะฝัั ะธ ะบะพัะพัะบะธั ะพัะทัะฒะพะฒ
- โ ะััะธัะพะฒะฐะฝะธะต ะบะฐัะฐะปะพะณะพะฒ
- โ ะะตััะธะบะธ ะธ ะปะพะณะธัะพะฒะฐะฝะธะต
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ

### ะะตััะธั 1.2 (ะะปะฐะฝะธััะตััั)
- ๐ ะะฝัะตะณัะฐัะธั ั ะฑะฐะทะพะน ะดะฐะฝะฝัั
- ๐ ะะฐัะฐะปะปะตะปัะฝัะน ะฟะฐััะธะฝะณ
- ๐ ะะตะฑ-ะธะฝัะตััะตะนั ะดะปั ัะฟัะฐะฒะปะตะฝะธั

### ะะตััะธั 1.3 (ะัะดััะตะต)
- ๐ ะะฝะฐะปะธัะธะบะฐ ะพัะทัะฒะพะฒ
- ๐ค ML-ะพะฑัะฐะฑะพัะบะฐ ัะตะบััะพะฒ
- ๐ API ะดะปั ะฒะฝะตัะฝะธั ะฟัะธะปะพะถะตะฝะธะน

---

## ๐ ะะะะะฎะงะะะะ

**ะะดะธะฝัะน ะฟะฐััะตั - ััะพ ะฝะฐัะต ะฑัะดััะตะต!**

- ๐ฏ ะะดะธะฝ ัะฐะนะป ะฒะผะตััะพ ะดะตัััะบะพะฒ
- ๐ง ะะตะณะบะพะต ัะพะฟัะพะฒะพะถะดะตะฝะธะต
- ๐ ะััััะพะต ัะฐะทะฒะธัะธะต
- ๐ ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝะฐั ััะฐัะธััะธะบะฐ

**ะะฐะฟะพะผะฝะธัะต: UnifiedDromParser - ะตะดะธะฝััะฒะตะฝะฝัะน ะฟะฐััะตั, ะบะพัะพััะน ะผั ัะฐะทะฒะธะฒะฐะตะผ!**
