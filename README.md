# üöÄ –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ —Å Drom.ru

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∑—ã–≤–æ–≤ –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª—è—Ö —Å —Å–∞–π—Ç–∞ drom.ru.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üóÇÔ∏è **–ö–∞—Ç–∞–ª–æ–≥–∏–∑–∞—Ü–∏—è –±—Ä–µ–Ω–¥–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±—Ä–µ–Ω–¥–æ–≤
- üìÑ **–ü–∞—Ä—Å–∏–Ω–≥ –¥–ª–∏–Ω–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–±–∑–æ—Ä—ã –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- üìã **–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ—Ç–∑—ã–≤–æ–≤** - –∫—Ä–∞—Ç–∫–∏–µ –º–Ω–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- üóÑÔ∏è **–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ë–î** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- üéØ **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞** - —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ CLI
- üê≥ **Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—É—Å–∫
- üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
parser_project/
‚îú‚îÄ‚îÄ src/auto_reviews_parser/     # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞–∫–µ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ database/               # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ catalog/               # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ parsers/               # –ü–∞—Ä—Å–µ—Ä—ã —Å–∞–π—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/                   # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ tests/                     # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker/                    # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ Makefile                   # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–í–µ—Å—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã `make`.

### 1. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repository_url>
cd parser_project

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
make setup
make install

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
source parser_env/bin/activate
```

### 2. –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã

```bash
# 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤ –∏ –º–æ–¥–µ–ª–µ–π
#    (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏–ª–∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
make run-init

# 2. –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
#    –ó–∞–º–µ–Ω–∏—Ç–µ 'toyota' –∏ 'camry' –Ω–∞ –Ω—É–∂–Ω—ã–µ –≤–∞–º.
make run-parse BRAND=toyota MODEL=camry

# 3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
make run-stats
```

### 3. –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (–¥–ª—è –æ–¥–Ω–æ–π –º–æ–¥–µ–ª–∏)

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –ø–∞—Ä—Å–∏–Ω–≥.

```bash
make run-full BRAND=toyota MODEL=camry
```

### 4. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
make test

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª—è –∫–æ–¥–∞
make check-lint

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
make format
```

### 5. –†–∞–±–æ—Ç–∞ —Å Docker

```bash
# –°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞
make docker-build

# –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
make docker-run
```


### –ß–µ—Ä–µ–∑ CLI —Å–∫—Ä–∏–ø—Ç

```bash
cd scripts

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
python main.py init --db ../auto_reviews.db --html ../brands_html.txt

# –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤
python main.py parse toyota camry --db ../auto_reviews.db --max-long 3 --max-short 5

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
python main.py stats --db ../auto_reviews.db

# –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª
python main.py full --db ../auto_reviews.db --html ../brands_html.txt \\
               --brand toyota --model camry --max-long 3 --max-short 5
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

- **brands** - —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –±—Ä–µ–Ω–¥–æ–≤ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
- **models** - –º–æ–¥–µ–ª–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –±—Ä–µ–Ω–¥–∞–º)
- **reviews** - –æ—Ç–∑—ã–≤—ã (–¥–ª–∏–Ω–Ω—ã–µ –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ)

### –°—Ö–µ–º–∞ –ë–î

```sql
-- –ë—Ä–µ–Ω–¥—ã
CREATE TABLE brands (
    id INTEGER PRIMARY KEY,
    name TEXT UNIQUE NOT NULL,
    url_name TEXT UNIQUE NOT NULL
);

-- –ú–æ–¥–µ–ª–∏
CREATE TABLE models (
    id INTEGER PRIMARY KEY,
    brand_id INTEGER REFERENCES brands(id),
    name TEXT NOT NULL,
    url_name TEXT NOT NULL
);

-- –û—Ç–∑—ã–≤—ã
CREATE TABLE reviews (
    id INTEGER PRIMARY KEY,
    model_id INTEGER REFERENCES models(id),
    review_type TEXT CHECK (review_type IN ('long', 'short')),
    author TEXT,
    title TEXT,
    content TEXT,
    rating INTEGER,
    pros TEXT,
    cons TEXT,
    -- –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
    year INTEGER,
    engine_volume REAL,
    fuel_type TEXT,
    transmission TEXT,
    drive_type TEXT,
    mileage INTEGER,
    ownership_period TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
make test

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/integration/test_complete_system.py -v

# –¢–µ—Å—Ç—ã —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src tests/
```

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

- `src/auto_reviews_parser/database/` - —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `src/auto_reviews_parser/catalog/` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ –±—Ä–µ–Ω–¥–æ–≤
- `src/auto_reviews_parser/parsers/` - –ø–∞—Ä—Å–µ—Ä—ã —Å–∞–π—Ç–æ–≤
- `tests/` - —Ç–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞

1. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å –≤ `src/auto_reviews_parser/parsers/`
2. –ù–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
make check-lint    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
make format        # –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
make docker-build

# –ó–∞–ø—É—Å–∫
make docker-run

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
docker-compose -f docker/docker-compose.yml up
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `DB_PATH` - –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- `HTML_FILE` - —Ñ–∞–π–ª —Å –∫–∞—Ç–∞–ª–æ–≥–æ–º –±—Ä–µ–Ω–¥–æ–≤
- `LOG_LEVEL` - —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫—É `logs/`
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ `make run-stats`
- Prometheus –º–µ—Ç—Ä–∏–∫–∏ (–≤ Docker —Ä–µ–∂–∏–º–µ)

## ü§ù –£—á–∞—Å—Ç–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. –§–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ñ–∏—á–∏
3. –í–Ω–µ—Å–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
5. Pull Request

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

- [Drom.ru API](https://drom.ru) - –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- [BeautifulSoup](https://www.crummy.com/software/BeautifulSoup/) - –ø–∞—Ä—Å–∏–Ω–≥ HTML
- [SQLite](https://sqlite.org/) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

---

**–ê–≤—Ç–æ—Ä**: AI Assistant  
**–î–∞—Ç–∞**: 2024  
**–í–µ—Ä—Å–∏—è**: 1.0.0
